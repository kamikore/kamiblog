(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b164c7f"],{"150d":function(e,t,i){"use strict";i("7873")},"371d":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{model:e.form,"label-width":"120px"}},[i("div",{staticClass:"avatar",on:{click:e.changeAvatar}},[i("el-image",{staticStyle:{width:"150px",height:"150px"},attrs:{src:e.userInfo.avatar}}),i("div",{staticClass:"avatar_hover"},[i("span",{staticClass:"iconfont icon-qiehuan2"},[e._v("更换头像")])])],1),i("el-form-item",{attrs:{label:"用户昵称"}},[i("el-input",{staticStyle:{width:"20%"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),i("el-form-item",{attrs:{label:"所在地区"}},[i("el-select",{attrs:{placeholder:e.form.province?"":e.userInfo.area[0]},model:{value:e.form.province,callback:function(t){e.$set(e.form,"province",t)},expression:"form.province"}},[i("el-option",{attrs:{label:"广东",value:"广东"}}),i("el-option",{attrs:{label:"湖北",value:"湖北"}})],1),i("el-select",{staticStyle:{"padding-left":"30px"},attrs:{placeholder:e.form.city?"":e.userInfo.area[1]},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}},[i("el-option",{attrs:{label:"中山",value:"中山"}}),i("el-option",{attrs:{label:"武汉",value:"武汉"}})],1)],1),i("el-form-item",{attrs:{label:"出生日期"}},[i("el-col",{attrs:{span:11}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:e.form.birthday?"":"未选择"},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1)],1),i("el-form-item",{attrs:{label:"性别"}},[i("el-radio-group",{model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[i("el-radio",{attrs:{label:"男"}}),i("el-radio",{attrs:{label:"女"}})],1)],1),i("el-form-item",{attrs:{label:"个人简介"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{type:"textarea",rows:"3",maxlength:"50","show-word-limit":"",placeholder:e.form.intro?"":"未设置"},model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存修改")])],1)],1),i("DragDialog",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],on:{close:function(t){e.visible=!1}}})],1)},s=[],n=i("5530"),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dragDialog_wrap"},[i("div",{staticClass:"dragDialog"},[i("div",{staticClass:"header",on:{mousedown:function(t){return e.drag(t,"dragDialog")}}},[i("span",[e._v("修改头像")]),i("span",{staticClass:"iconfont icon-close",on:{click:e.handleClose}})]),i("div",{staticClass:"content"},[i("div",{staticClass:"content_left"},[i("div",{staticClass:"clip_box"},[i("div",{staticClass:"container_bg"},[i("div",{staticClass:"img_container"},[i("img",{ref:"clip_img",attrs:{src:"",alt:""}})])]),i("button",{directives:[{name:"show",rawName:"v-show",value:!e.visible,expression:"!visible"}],staticClass:"iconfont icon-qiehuan2",on:{click:e.select}},[e._v(" 重新选择 ")]),i("label",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"file_input",on:{click:e.select}},[i("i"),i("span",[e._v("选择图片")])]),i("input",{ref:"file_input",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png,image/jpg,image/jpeg"}})])]),i("div",{staticClass:"content_right"},[i("div",{staticClass:"preview_box"},[i("div",{staticClass:"container_pre"},[i("img",{ref:"pre_img",attrs:{src:"",alt:""}})]),i("div",{staticClass:"pre_info"},[e._v("预览头像")])])])]),i("div",{staticClass:"footer"},[i("button",[e._v("取消")]),i("button",{on:{click:e.upload}},[e._v("上传并保存")])])])])},l=[];i("ac1f"),i("1276");function r(e,t){var i=document.querySelector(".".concat(t)),a=i.offsetWidth,s=i.offsetHeight,n=document.documentElement.clientHeight,o=document.documentElement.clientWidth,l=e.clientX-i.offsetLeft,r=e.clientY-i.offsetTop;function c(e){var t=e.clientX-l,c=e.clientY-r;t<=0?t=0:t+a>=o&&(t=o-a),c<=0?c=0:c+s>=n&&(c=n-s),i.style.left="".concat(t,"px"),i.style.top="".concat(c,"px")}document.addEventListener("mousemove",c),document.addEventListener("mouseup",(function(){document.removeEventListener("mousemove",c)}))}var c=i("c24f"),u={props:["userId"],data:function(){return{imgFile:"",imgType:"",visible:!0}},methods:{drag:function(e,t){r(e,t)},select:function(){this.$refs.file_input.click()},upload:function(){var e=this;this.imgFile?(this.$loading({fullscreen:!0}),Object(c["f"])({imgFile:this.imgFile,type:this.imgType}).then((function(t){e.$store.dispatch("user/uploadAvatar",t.url),e.$emit("close"),e.$loading().close()})).catch((function(e){console.log(e)}))):this.$message.warning("请选择图片")},handleClose:function(){this.$emit("close"),this.visible=!1}},mounted:function(){var e=this,t=new FileReader,i=new Image,a=this.$refs.clip_img,s=this.$refs.pre_img;this.$refs.file_input.addEventListener("change",(function(){e.visible&&(e.visible=!e.visible),e.imgFile=e.$refs.file_input.files[0],console.log(e.imgFile),e.imgType=e.imgFile.type.split("/")[1],t.readAsDataURL(e.imgFile),t.onload=function(){i.src=t.result,e.imgFile=t.result,i.onload=function(){i.width>250?(a.style.width="250px",s.style.width="150px"):i.height>250&&(a.style.height="250px",s.style.height="150px")},a.src=t.result,s.src=t.result}}))}},d=u,f=(i("6aba"),i("2877")),m=Object(f["a"])(d,o,l,!1,null,"dd710e4c",null),p=m.exports,v=i("2f62"),h={components:{DragDialog:p},data:function(){return{form:{username:"",avatar:"",province:"",city:"",date:"",gender:"",intro:""},visible:!1,loading:!1}},computed:Object(n["a"])({},Object(v["b"])(["userInfo"])),methods:{onSubmit:function(){var e=this;this.loading=!0,Object(c["e"])(this.form).then((function(t){e.loading=!1})).catch((function(e){console.log(e)}))},onCancel:function(){this.$message({message:"cancel!",type:"warning"})},changeAvatar:function(){this.visible=!this.visible;var e=document.querySelector(".dragDialog");e.style.left="50px",e.style.top="50px"}},created:function(){this.form=this.userInfo,this.url=this.userInfo.avatar},mounted:function(){var e=this;document.onkeyup=function(t){if(e.visible)switch(t.code){case"Enter":break;case"Escape":e.visible=!1;break}}}},g=h,b=(i("150d"),Object(f["a"])(g,a,s,!1,null,"33154188",null));t["default"]=b.exports},"6aba":function(e,t,i){"use strict";i("d15a")},7873:function(e,t,i){},d15a:function(e,t,i){}}]);